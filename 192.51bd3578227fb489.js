"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[192],{192:(x,_,g)=>{g.d(_,{V:()=>S});var f=g(467),e=g(3953),i=g(5374),F=g(2872),y=g(8096),W=g(9333),b=g(4589);let P=(()=>{var s;class u{constructor(o,n,t){this.workoutData=o,this.userData=n,this.muscleGroupService=t}ngOnInit(){this.workoutData.loadWorkOuts().subscribe(o=>{console.log("initialize workout data")})}defaultWorkoutConfig(){return{goal:"Build Muscle",fitnessLevel:"intermediate",daysPerWeek:4,equipment:["barbell","dumbbell"],focusAreas:["chest","legs","back","arms","upper body","core"],duration:60,preferences:["compound","isolation"]}}getWorkoutConfig(){var o=this;return(0,f.A)(function*(){var n,t,r,d,m,l,p,c=o.defaultWorkoutConfig(),k=yield o.userData.getWorkoutPlan();return null===k?c:{goal:null!==(n=k.goal)&&void 0!==n?n:c.goal,fitnessLevel:null!==(t=k.fitnessLevel)&&void 0!==t?t:c.fitnessLevel,daysPerWeek:null!==(r=k.daysPerWeek)&&void 0!==r?r:c.daysPerWeek,equipment:null!==(d=k.equipment)&&void 0!==d?d:c.equipment,focusAreas:null!==(m=k.focusAreas)&&void 0!==m?m:c.focusAreas,duration:null!==(l=k.duration)&&void 0!==l?l:c.duration,preferences:null!==(p=k.preferences)&&void 0!==p?p:c.preferences}})()}generateWorkoutPlan(o){var n=this;return(0,f.A)(function*(){const t=yield n.userData.getWorkoutPlan();if(null!==t)return t;const r=n.determineSplit(o.daysPerWeek,o.goal,o.preferences),d=n.selectExercises(o.goal,o.fitnessLevel,o.equipment,o.focusAreas,o.preferences);console.log("selected ",d.length," exercises");const m=n.createWorkoutSchedule(r,d,o.fitnessLevel,o.goal,o.duration);var l=n.generateWeeklyPlan(m);return l.goal=o.goal,l.fitnessLevel=o.fitnessLevel,l.daysPerWeek=o.daysPerWeek,l.equipment=o.equipment,l.focusAreas=o.focusAreas,l.duration=o.duration,l.preferences=o.preferences,console.log("Generated workout plan:",l),n.userData.saveWorkoutPlan(l),l})()}determineSplit(o,n,t){return 3===o?[{day:"Day 1",muscleGroups:["chest","back","legs"]},{day:"Day 2",muscleGroups:["arms","upper body","core"]},{day:"Day 3",muscleGroups:["all"]}]:4===o?[{day:"Day 1",muscleGroups:["chest","back"]},{day:"Day 2",muscleGroups:["legs"]},{day:"Day 3",muscleGroups:["arms","upper body"]},{day:"Day 4",muscleGroups:["core","all"]}]:5===o?[{day:"Day 1",muscleGroups:["chest"]},{day:"Day 2",muscleGroups:["back"]},{day:"Day 3",muscleGroups:["legs"]},{day:"Day 4",muscleGroups:["arms","upper body"]},{day:"Day 5",muscleGroups:["core"]}]:6===o?[{day:"Day 1",muscleGroups:["chest"]},{day:"Day 2",muscleGroups:["back"]},{day:"Day 3",muscleGroups:["legs"]},{day:"Day 4",muscleGroups:["arms"]},{day:"Day 5",muscleGroups:["upper body"]},{day:"Day 6",muscleGroups:["core"]}]:[{day:"custom split",muscleGroups:["all"]}]}selectExercises(o,n,t,r,d){const m=this.workoutData.getAllWorkouts(),l=this.muscleGroupService.getMuscleGroups().filter(c=>r.includes(c.key)).flatMap(c=>c.values);console.log("Focus Areas:",r),console.log("All Muscles:",l);var p=m.filter(c=>t.includes(c.equipment)&&l.includes(c.primaryMuscles[0]));return console.log("Filtered Exercises:",p.length),p}createWorkoutSchedule(o,n,t,r,d){const m=[];return this.muscleGroupService.getMuscleGroups(),o.forEach(p=>{const c=this.getRandomExercises(n,p.muscleGroups,4);m.push({day:p.day,muscleGroups:p.muscleGroups,exercises:c,sets:this.determineSets(r,t),reps:this.determineReps(r,t),rest:this.determineRest(r,t)})}),m}getRandomExercises(o,n,t){const r=this.muscleGroupService.getMuscleGroups().filter(l=>n.includes(l.key)).flatMap(l=>l.values);return o.filter(l=>r.includes(l.primaryMuscles[0])).sort(()=>.5-Math.random()).slice(0,t)}determineSets(o,n){return"Lose Weight"===o?"beginner"===n?5:6:"Build Muscle"===o?"beginner"===n?4:5:3}determineReps(o,n){return"Lose Weight"===o?12:"Build Muscle"===o?8:10}determineRest(o,n){return"Lose Weight"===o?"60-90 seconds":"Build Muscle"===o?"2-3 minutes":"60 seconds"}generateWeeklyPlan(o){return{days:o.map(t=>({...t,exercises:t.exercises.map(r=>r)}))}}}return(s=u).\u0275fac=function(o){return new(o||s)(e.KVO(y.k),e.KVO(W.E),e.KVO(b.A))},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),u})();var h=g(177),v=g(4341);function C(s,u){if(1&s){const a=e.RV6();e.j41(0,"ion-chip",14),e.bIt("click",function(){const n=e.eBV(a).$implicit,t=e.XpG();return e.Njj(t.toggleEquipment(n))}),e.j41(1,"ion-label"),e.EFF(2),e.k0s()()}if(2&s){const a=u.$implicit,o=e.XpG();e.Y8G("color",o.workoutConfig.equipment.includes(a)?"primary":"medium"),e.R7$(2),e.JRh(a)}}let E=(()=>{var s;class u{constructor(o,n,t,r){this.modalCtrl=o,this.cdr=n,this.workoutPlanner=t,this.navParams=r,this.equipments=["barbell","dumbbell","cable","machine","body only","bands"]}ngOnInit(){this.workoutConfig=this.workoutPlanner.defaultWorkoutConfig(),console.log("workoutConfig",this.workoutConfig)}ionViewWillEnter(){var o=this.navParams.get("workoutConfig");o&&(this.workoutConfig=o)}applyFilters(){console.log("workoutConfig",this.workoutConfig),this.dismiss(this.workoutConfig)}dismiss(o){this.modalCtrl.dismiss(o)}toggleEquipment(o){var n;null!==(n=this.workoutConfig)&&void 0!==n&&n.equipment.includes(o)?this.workoutConfig.equipment=this.workoutConfig.equipment.filter(t=>t!==o):this.workoutConfig.equipment.push(o)}}return(s=u).\u0275fac=function(o){return new(o||s)(e.rXU(i.W3),e.rXU(e.gRc),e.rXU(P),e.rXU(F.y8))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-workout-planner-editor"]],decls:53,vars:9,consts:[["translucent","true"],["slot","start"],[3,"click"],["slot","end"],["strong","",3,"click"],[3,"ngModelChange","ngModel"],["value","beginner"],["value","intermediate"],["value","advanced"],["value","Lose Weight"],["value","Build Muscle"],["value","Endurance"],["aria-label","Days in a Week",3,"ngModelChange","ngModel","ticks","pin","snaps","min","max"],[3,"color","click",4,"ngFor","ngForOf"],[3,"click","color"]],template:function(o,n){1&o&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e.bIt("click",function(){return n.dismiss()}),e.EFF(4,"Cancel"),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6," Create Workout Plan "),e.k0s(),e.j41(7,"ion-buttons",3)(8,"ion-button",4),e.bIt("click",function(){return n.applyFilters()}),e.EFF(9,"Done"),e.k0s()()()(),e.j41(10,"ion-content")(11,"ion-item")(12,"ion-label"),e.EFF(13,"What is your fitness level?"),e.k0s()(),e.j41(14,"ion-item")(15,"ion-segment",5),e.mxI("ngModelChange",function(r){return e.DH7(n.workoutConfig.fitnessLevel,r)||(n.workoutConfig.fitnessLevel=r),r}),e.j41(16,"ion-segment-button",6)(17,"ion-label"),e.EFF(18,"Beginner"),e.k0s()(),e.j41(19,"ion-segment-button",7)(20,"ion-label"),e.EFF(21,"Intermediate"),e.k0s()(),e.j41(22,"ion-segment-button",8)(23,"ion-label"),e.EFF(24,"Advanced"),e.k0s()()()(),e.j41(25,"ion-item")(26,"ion-label"),e.EFF(27,"What is your goal?"),e.k0s()(),e.j41(28,"ion-item")(29,"ion-segment",5),e.mxI("ngModelChange",function(r){return e.DH7(n.workoutConfig.goal,r)||(n.workoutConfig.goal=r),r}),e.j41(30,"ion-segment-button",9)(31,"ion-label"),e.EFF(32,"Lose Weight"),e.k0s()(),e.j41(33,"ion-segment-button",10)(34,"ion-label"),e.EFF(35,"Build Muscle"),e.k0s()(),e.j41(36,"ion-segment-button",11)(37,"ion-label"),e.EFF(38,"Stay Fit"),e.k0s()()()(),e.j41(39,"ion-item")(40,"ion-label"),e.EFF(41,"How many days you can train in a week?"),e.k0s()(),e.j41(42,"ion-item")(43,"ion-range",12),e.mxI("ngModelChange",function(r){return e.DH7(n.workoutConfig.daysPerWeek,r)||(n.workoutConfig.daysPerWeek=r),r}),e.j41(44,"ion-label",1),e.EFF(45,"2"),e.k0s(),e.j41(46,"ion-label",3),e.EFF(47,"6"),e.k0s()()(),e.j41(48,"ion-item")(49,"ion-label"),e.EFF(50,"What are the equipments you have access to?"),e.k0s()(),e.j41(51,"ion-item"),e.DNE(52,C,3,2,"ion-chip",13),e.k0s()()),2&o&&(e.R7$(15),e.R50("ngModel",n.workoutConfig.fitnessLevel),e.R7$(14),e.R50("ngModel",n.workoutConfig.goal),e.R7$(14),e.R50("ngModel",n.workoutConfig.daysPerWeek),e.Y8G("ticks",!0)("pin",!0)("snaps",!0)("min",2)("max",6),e.R7$(9),e.Y8G("ngForOf",n.equipments))},dependencies:[h.Sq,v.BC,v.vS,i.Jm,i.QW,i.ZB,i.W9,i.eU,i.uz,i.he,i.Ob,i.Gp,i.eP,i.BC,i.ai,i.su,i.Je],styles:["ion-content[_ngcontent-%COMP%]{height:100%}"]}),u})();var w=g(5642);function D(s,u){1&s&&(e.j41(0,"span"),e.EFF(1,"Filter"),e.k0s())}function G(s,u){1&s&&(e.j41(0,"span"),e.nrm(1,"ion-icon",6),e.k0s())}function j(s,u){if(1&s&&(e.j41(0,"ion-item-divider",9)(1,"ion-label"),e.EFF(2),e.k0s()()),2&s){const a=e.XpG().$implicit;e.R7$(2),e.SpI(" ",a.day," ")}}function M(s,u){if(1&s&&(e.j41(0,"ion-item",10)(1,"ion-thumbnail",11),e.nrm(2,"img",12),e.k0s(),e.j41(3,"ion-label")(4,"h2"),e.EFF(5),e.k0s(),e.j41(6,"p"),e.EFF(7),e.k0s(),e.j41(8,"p"),e.EFF(9),e.k0s()()()),2&s){const a=u.$implicit,o=e.XpG().$implicit;e.Mz_("routerLink","/app/tabs/workouts/",a.id,""),e.R7$(2),e.FS9("src",a.thumbnail,e.B4B),e.FS9("alt",a.thumbnail),e.R7$(3),e.JRh(a.name),e.R7$(2),e.Lme("",o.sets," x ",o.reps," Sets"),e.R7$(2),e.SpI("",o.rest," seconds rest")}}function R(s,u){if(1&s&&(e.j41(0,"ion-item-group"),e.DNE(1,j,3,1,"ion-item-divider",7)(2,M,10,8,"ion-item",8),e.k0s()),2&s){const a=u.$implicit;e.R7$(),e.Y8G("ngIf",a.exercises&&a.exercises.length>0),e.R7$(),e.Y8G("ngForOf",a.exercises)}}let S=(()=>{var s;class u{constructor(o,n,t,r,d){this.workoutPlanner=o,this.workoutData=n,this.modalCtrl=t,this.routerOutlet=r,this.userData=d,this.ios=!1}ngOnInit(){this.workoutPlanner.getWorkoutConfig().then(o=>{this.workoutData.loadWorkOuts().subscribe(n=>{this.reloadWorkoutPlan()})})}reloadWorkoutPlan(){this.workoutPlanner.generateWorkoutPlan(this.workoutConfig).then(o=>{this.workoutPlan=o,console.log("Returning cached workout plan:",this.workoutPlan),console.log(this.workoutPlan.days[0].exercises[0]),console.log(this.workoutPlan.days[0].exercises[0].images[0]),console.log(this.workoutPlan.days[0].exercises[0].thumbnail);var n=this.workoutPlan.days[0].exercises[0].images;console.log(n&&n.length>0?"assets/exercises/"+n[0]:null)})}presentFilter(){var o=this;return(0,f.A)(function*(){const n=yield o.modalCtrl.create({component:E,presentingElement:o.routerOutlet.nativeEl,componentProps:{filter:null}});yield n.present();const{data:t}=yield n.onWillDismiss();t&&(o.userData.clearWorkoutPlan(),o.workoutConfig=t,console.log("Creating workout plan with config",t),o.workoutPlanner.generateWorkoutPlan(o.workoutConfig).then(r=>{o.workoutPlan=r}))})()}}return(s=u).\u0275fac=function(o){return new(o||s)(e.rXU(P),e.rXU(y.k),e.rXU(i.W3),e.rXU(i.Rg),e.rXU(W.E))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-workout-planner"]],decls:12,vars:3,consts:[["slot","end"],[3,"click"],[4,"ngIf"],[1,"icon-container"],["fullscreen","true"],[4,"ngFor","ngForOf"],["slot","icon-only","name","create"],["sticky","","color","primary",4,"ngIf"],[3,"routerLink",4,"ngFor","ngForOf"],["sticky","","color","primary"],[3,"routerLink"],["slot","start"],["width","150","height","100",3,"src","alt"]],template:function(o,n){1&o&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Workout-Planner"),e.k0s(),e.j41(4,"ion-buttons",0)(5,"ion-button",1),e.bIt("click",function(){return n.presentFilter()}),e.DNE(6,D,2,0,"span",2),e.j41(7,"div",3),e.DNE(8,G,2,0,"span",2),e.k0s()()()()(),e.j41(9,"ion-content",4)(10,"ion-list"),e.DNE(11,R,3,2,"ion-item-group",5),e.k0s()()),2&o&&(e.R7$(6),e.Y8G("ngIf",n.ios),e.R7$(2),e.Y8G("ngIf",!n.ios),e.R7$(3),e.Y8G("ngForOf",null==n.workoutPlan?null:n.workoutPlan.days))},dependencies:[h.Sq,h.bT,i.Jm,i.QW,i.W9,i.eU,i.iq,i.uz,i.Dg,i.jh,i.he,i.nf,i.Zx,i.BC,i.ai,i.N7,w.Wk]}),u})()}}]);