"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[642],{642:(_,c,l)=>{l.r(c),l.d(c,{RegisterUserPageModule:()=>I});var h=l(177),d=l(9417),n=l(5374),u=l(8498),e=l(3953),f=l(5679);const p=["dobPicker"];function R(r,a){1&r&&e.nrm(0,"ion-spinner")}function y(r,a){if(1&r&&(e.j41(0,"ion-card")(1,"ion-card-content")(2,"ion-text",23),e.EFF(3),e.k0s()()()),2&r){const g=e.XpG();e.R7$(3),e.JRh(g.error)}}function b(r,a){if(1&r&&(e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3),e.k0s(),e.j41(4,"ion-card-subtitle"),e.EFF(5),e.k0s()()()),2&r){const g=e.XpG();e.R7$(3),e.JRh(g.gymInfo.name),e.R7$(2),e.JRh(g.gymInfo.address)}}function M(r,a){1&r&&e.nrm(0,"ion-datetime",24,1)}const F=[{path:"",component:(()=>{var r;class a{constructor(i,t,s){this.route=i,this.router=t,this.gymManagementService=s,this.gymId=null,this.gymInfo=null,this.loading=!1,this.error=null,this.user={userId:0,name:"",phoneNumber:"",email:"",dateOfBirth:"",gender:"Male",address:"",emergencyContact:"",expiryDate:"",createdDate:""}}ngOnInit(){this.gymId=this.route.snapshot.queryParamMap.get("gymId"),console.log("Gym ID:",this.gymId),this.gymId&&this.getGymInfo()}getGymInfo(){this.gymId?(this.loading=!0,this.error=null,this.gymManagementService.getGymInfo(this.gymId).subscribe({next:i=>{console.log(i),i.success?this.gymInfo=i.gymInfo:this.error="Failed to fetch gym details",this.loading=!1},error:i=>{this.error="An error occurred while fetching gym details",console.error(i),this.loading=!1}})):this.error="Gym ID not found in URL"}submitForm(){this.user.name&&this.user.phoneNumber?(this.dobPicker&&(this.user.dateOfBirth="string"==typeof this.dobPicker.value?this.dobPicker.value:""),console.log("User Data:",this.user),this.loading=!0,this.error=null,this.gymManagementService.registerUser(this.gymId,this.user).subscribe({next:i=>{this.loading=!1,console.log("User registered successfully:",i),this.router.navigate(["/membership"],{queryParams:{gymId:this.gymId,phoneNumber:i.phoneNumber}}).then(()=>{window.location.reload()})},error:i=>{this.loading=!1,this.error="Failed to register user. Please try again.",console.error("Registration error:",i)}})):this.error="Name and Phone Number are mandatory."}}return(r=a).\u0275fac=function(i){return new(i||r)(e.rXU(u.nX),e.rXU(u.Ix),e.rXU(f.q))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-register-user"]],viewQuery:function(i,t){if(1&i&&e.GBs(p,5),2&i){let s;e.mGM(s=e.lsd())&&(t.dobPicker=s.first)}},decls:58,vars:11,consts:[["registerForm","ngForm"],["dobPicker",""],["slot","start"],["defaultHref","/membership"],[4,"ngIf"],[3,"ngSubmit"],["position","floating"],["type","text","required","","name","name",3,"ngModelChange","ngModel"],["type","tel","required","","name","phoneNumber",3,"ngModelChange","ngModel"],["datetime","dob-datetime","presentation","date"],[3,"keepContentsMounted"],["value","optional"],["slot","header"],["slot","content"],["name","gender",3,"ngModelChange","ngModel"],["value","Male"],["value","Female"],["value","Other"],["type","email","name","email",3,"ngModelChange","ngModel"],["name","address",3,"ngModelChange","ngModel"],["type","tel","name","emergencyContact",3,"ngModelChange","ngModel"],[1,"button-container"],["expand","block","color","primary","type","submit",3,"disabled"],["color","danger"],["id","dob-datetime","presentation","date","name","dob"]],template:function(i,t){if(1&i){const s=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",2),e.nrm(3,"ion-back-button",3),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Register"),e.k0s()()(),e.j41(6,"ion-content"),e.DNE(7,R,1,0,"ion-spinner",4)(8,y,4,1,"ion-card",4)(9,b,6,2,"ion-card",4),e.j41(10,"form",5,0),e.bIt("ngSubmit",function(){return e.eBV(s),e.Njj(t.submitForm())}),e.j41(12,"ion-list")(13,"ion-item")(14,"ion-label",6),e.EFF(15,"Name *"),e.k0s(),e.j41(16,"ion-input",7),e.mxI("ngModelChange",function(o){return e.eBV(s),e.DH7(t.user.name,o)||(t.user.name=o),e.Njj(o)}),e.k0s()(),e.j41(17,"ion-item")(18,"ion-label",6),e.EFF(19,"Phone Number *"),e.k0s(),e.j41(20,"ion-input",8),e.mxI("ngModelChange",function(o){return e.eBV(s),e.DH7(t.user.phoneNumber,o)||(t.user.phoneNumber=o),e.Njj(o)}),e.k0s()(),e.j41(21,"ion-item")(22,"ion-label"),e.EFF(23,"Date of Birth"),e.k0s(),e.nrm(24,"ion-datetime-button",9),e.j41(25,"ion-modal",10),e.DNE(26,M,2,0,"ng-template"),e.k0s()(),e.j41(27,"ion-accordion-group")(28,"ion-accordion",11)(29,"ion-item",12)(30,"ion-label"),e.EFF(31,"Optional Details"),e.k0s()(),e.j41(32,"div",13)(33,"ion-item")(34,"ion-label",6),e.EFF(35,"Gender"),e.k0s(),e.j41(36,"ion-select",14),e.mxI("ngModelChange",function(o){return e.eBV(s),e.DH7(t.user.gender,o)||(t.user.gender=o),e.Njj(o)}),e.j41(37,"ion-select-option",15),e.EFF(38,"Male"),e.k0s(),e.j41(39,"ion-select-option",16),e.EFF(40,"Female"),e.k0s(),e.j41(41,"ion-select-option",17),e.EFF(42,"Other"),e.k0s()()(),e.j41(43,"ion-item")(44,"ion-label",6),e.EFF(45,"Email"),e.k0s(),e.j41(46,"ion-input",18),e.mxI("ngModelChange",function(o){return e.eBV(s),e.DH7(t.user.email,o)||(t.user.email=o),e.Njj(o)}),e.k0s()(),e.j41(47,"ion-item")(48,"ion-label",6),e.EFF(49,"Address"),e.k0s(),e.j41(50,"ion-textarea",19),e.mxI("ngModelChange",function(o){return e.eBV(s),e.DH7(t.user.address,o)||(t.user.address=o),e.Njj(o)}),e.k0s()(),e.j41(51,"ion-item")(52,"ion-label",6),e.EFF(53,"Emergency Contact"),e.k0s(),e.j41(54,"ion-input",20),e.mxI("ngModelChange",function(o){return e.eBV(s),e.DH7(t.user.emergencyContact,o)||(t.user.emergencyContact=o),e.Njj(o)}),e.k0s()()()()()(),e.j41(55,"div",21)(56,"ion-button",22),e.EFF(57,"Register"),e.k0s()()()()}if(2&i){const s=e.sdS(11);e.R7$(7),e.Y8G("ngIf",t.loading),e.R7$(),e.Y8G("ngIf",t.error),e.R7$(),e.Y8G("ngIf",t.gymInfo),e.R7$(7),e.R50("ngModel",t.user.name),e.R7$(4),e.R50("ngModel",t.user.phoneNumber),e.R7$(5),e.Y8G("keepContentsMounted",!0),e.R7$(11),e.R50("ngModel",t.user.gender),e.R7$(10),e.R50("ngModel",t.user.email),e.R7$(4),e.R50("ngModel",t.user.address),e.R7$(4),e.R50("ngModel",t.user.emergencyContact),e.R7$(2),e.Y8G("disabled",!s.form.valid)}},dependencies:[h.bT,d.qT,d.BC,d.cb,d.YS,d.vS,d.cV,n.xk,n.YH,n.Jm,n.QW,n.b_,n.I9,n.ME,n.HW,n.tN,n.W9,n.A9,n.K4,n.eU,n.$w,n.uz,n.he,n.nf,n.Nm,n.Ip,n.w2,n.IO,n.nc,n.BC,n.ai,n.Sb,n.Je,n.Gw,n.el]}),a})()}];let j=(()=>{var r;class a{}return(r=a).\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[u.iI.forChild(F),u.iI]}),a})(),I=(()=>{var r;class a{}return(r=a).\u0275fac=function(i){return new(i||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[h.MD,d.YN,n.bv,j]}),a})()}}]);