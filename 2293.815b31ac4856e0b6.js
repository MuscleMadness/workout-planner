"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2293],{2293:(F,h,a)=>{a.r(h),a.d(h,{MembershipPageModule:()=>k});var g=a(177),c=a(9417),i=a(5374),l=a(8498),e=a(3953),p=a(5679);function d(n,s){1&n&&e.nrm(0,"ion-spinner")}function f(n,s){if(1&n){const t=e.RV6();e.j41(0,"ion-button",7),e.bIt("click",function(){e.eBV(t);const r=e.XpG(2);return e.Njj(r.registerUser())}),e.EFF(1,"Register"),e.k0s()}}function b(n,s){if(1&n&&(e.j41(0,"ion-card")(1,"ion-card-content")(2,"ion-text",5),e.EFF(3),e.k0s(),e.DNE(4,f,2,0,"ion-button",6),e.k0s()()),2&n){const t=e.XpG();e.R7$(3),e.JRh(t.error),e.R7$(),e.Y8G("ngIf",t.showRegisterButton)}}function y(n,s){if(1&n){const t=e.RV6();e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3),e.k0s(),e.j41(4,"ion-card-subtitle"),e.EFF(5),e.k0s()(),e.j41(6,"ion-card-content")(7,"div",8)(8,"ion-button",9),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.callGym(r.gymInfo.contactNumber))}),e.nrm(9,"ion-icon",10),e.EFF(10," Call "),e.k0s(),e.j41(11,"ion-button",11),e.bIt("click",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.emailGym(r.gymInfo.email))}),e.nrm(12,"ion-icon",12),e.EFF(13," Email "),e.k0s()()()()}if(2&n){const t=e.XpG();e.R7$(3),e.JRh(t.gymInfo.name),e.R7$(2),e.JRh(t.gymInfo.address)}}function I(n,s){if(1&n&&(e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3),e.k0s(),e.j41(4,"ion-card-subtitle"),e.EFF(5),e.k0s()(),e.j41(6,"ion-card-content")(7,"p")(8,"strong"),e.EFF(9,"Phone:"),e.k0s(),e.EFF(10),e.k0s(),e.j41(11,"p")(12,"strong"),e.EFF(13,"Email:"),e.k0s(),e.EFF(14),e.k0s(),e.j41(15,"p")(16,"strong"),e.EFF(17,"Membership Expiry:"),e.k0s(),e.EFF(18),e.k0s()()()),2&n){const t=e.XpG();e.R7$(3),e.JRh(t.userInfo.Name),e.R7$(2),e.JRh(t.userInfo.Address),e.R7$(5),e.SpI(" ",t.userInfo.PhoneNumber,""),e.R7$(4),e.SpI(" ",t.userInfo.Email,""),e.R7$(4),e.SpI(" ",t.userInfo.ExpiryDate,"")}}const _=[{path:"",component:(()=>{var n;class s{constructor(o,r,m){this.route=o,this.router=r,this.gymManagementService=m,this.gymId=null,this.gymInfo=null,this.loading=!1,this.error=null,this.phoneNumber="",this.userInfo=null,this.showRegisterButton=!1}ngOnInit(){this.gymId=this.route.snapshot.queryParamMap.get("gymId"),console.log("Gym ID:",this.gymId),this.gymId&&this.getGymInfo()}getGymInfo(){this.gymId?(this.loading=!0,this.error=null,this.gymManagementService.getGymInfo(this.gymId).subscribe({next:o=>{console.log(o),o.success?this.gymInfo=o.gymInfo:this.error="Failed to fetch gym details",this.loading=!1},error:o=>{this.error="An error occurred while fetching gym details",console.error(o),this.loading=!1}})):this.error="Gym ID not found in URL"}checkUser(){this.showRegisterButton=!1,this.phoneNumber?(this.loading=!0,this.error="",this.gymManagementService.getUserInfo(this.gymId,this.phoneNumber).subscribe(o=>{console.log(o),this.loading=!1,"success"===o.status?this.userInfo=o.user:(this.showRegisterButton=!0,this.userInfo=null,this.error="User not found. Would you like to register?")},o=>{console.log(o),this.loading=!1,this.error="An error occurred while checking membership."})):this.error="Please enter a phone number."}registerUser(){this.gymId&&this.phoneNumber?this.router.navigate(["/register-user"],{queryParams:{gymId:this.gymId,phoneNumber:this.phoneNumber}}):console.error("Gym ID or Phone Number is missing.")}callGym(o){o?window.open(`tel:${o}`,"_system"):console.error("Contact number is not available.")}emailGym(o){o?window.open(`mailto:${o}`,"_system"):console.error("Email address is not available.")}}return(n=s).\u0275fac=function(o){return new(o||n)(e.rXU(l.nX),e.rXU(l.Ix),e.rXU(p.q))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-membership"]],decls:18,vars:5,consts:[["slot","start"],[4,"ngIf"],["position","floating"],["type","tel",3,"ngModelChange","ngModel"],["slot","end","expand","block","color","primary",3,"click"],["color","danger"],["expand","block","fill","outline","color","primary",3,"click",4,"ngIf"],["expand","block","fill","outline","color","primary",3,"click"],[1,"action-buttons"],["color","primary","fill","clear",3,"click"],["name","call","slot","start"],["color","secondary","fill","clear",3,"click"],["name","mail","slot","start"]],template:function(o,r){1&o&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-menu-button"),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Membership"),e.k0s()()(),e.j41(6,"ion-content"),e.DNE(7,d,1,0,"ion-spinner",1)(8,b,5,2,"ion-card",1)(9,y,14,2,"ion-card",1),e.j41(10,"ion-item")(11,"ion-item")(12,"ion-label",2),e.EFF(13,"Enter your Phone Number"),e.k0s(),e.j41(14,"ion-input",3),e.mxI("ngModelChange",function(u){return e.DH7(r.phoneNumber,u)||(r.phoneNumber=u),u}),e.k0s()(),e.j41(15,"ion-button",4),e.bIt("click",function(){return r.checkUser()}),e.EFF(16,"Proceed"),e.k0s()(),e.DNE(17,I,19,5,"ion-card",1),e.k0s()),2&o&&(e.R7$(7),e.Y8G("ngIf",r.loading),e.R7$(),e.Y8G("ngIf",r.error),e.R7$(),e.Y8G("ngIf",r.gymInfo),e.R7$(5),e.R50("ngModel",r.phoneNumber),e.R7$(3),e.Y8G("ngIf",r.userInfo))},dependencies:[g.bT,c.BC,c.vS,i.Jm,i.QW,i.b_,i.I9,i.ME,i.HW,i.tN,i.W9,i.eU,i.iq,i.$w,i.uz,i.he,i.MC,i.w2,i.IO,i.BC,i.ai,i.Gw],styles:[".action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px}ion-button[_ngcontent-%COMP%]{font-size:16px;height:48px;text-transform:none}"]}),s})()}];let M=(()=>{var n;class s{}return(n=s).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[l.iI.forChild(_),l.iI]}),s})(),k=(()=>{var n;class s{}return(n=s).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[g.MD,c.YN,i.bv,M]}),s})()}}]);