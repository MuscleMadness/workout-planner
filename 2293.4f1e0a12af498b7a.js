"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2293],{2293:(G,h,a)=>{a.r(h),a.d(h,{MembershipPageModule:()=>F});var u=a(177),m=a(9417),r=a(5374),l=a(8498),e=a(3953),d=a(5679),f=a(9747);function b(t,s){1&t&&e.nrm(0,"ion-spinner")}function _(t,s){if(1&t){const o=e.RV6();e.j41(0,"ion-button",4),e.bIt("click",function(){e.eBV(o);const i=e.XpG(2);return e.Njj(i.registerUser())}),e.EFF(1,"Register"),e.k0s()}}function I(t,s){if(1&t&&(e.j41(0,"ion-card")(1,"ion-card-content")(2,"ion-text",2),e.EFF(3),e.k0s(),e.DNE(4,_,2,0,"ion-button",3),e.k0s()()),2&t){const o=e.XpG();e.R7$(3),e.JRh(o.error),e.R7$(),e.Y8G("ngIf",o.showRegisterButton)}}function y(t,s){if(1&t){const o=e.RV6();e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3),e.k0s(),e.j41(4,"ion-card-subtitle"),e.EFF(5),e.k0s()(),e.j41(6,"ion-card-content")(7,"div",5)(8,"ion-button",6),e.bIt("click",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.callGym(i.gymInfo.contactNumber))}),e.nrm(9,"ion-icon",7),e.EFF(10," Call "),e.k0s(),e.j41(11,"ion-button",8),e.bIt("click",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.emailGym(i.gymInfo.email))}),e.nrm(12,"ion-icon",9),e.EFF(13," Email "),e.k0s()()()()}if(2&t){const o=e.XpG();e.R7$(3),e.JRh(o.gymInfo.name),e.R7$(2),e.JRh(o.gymInfo.address)}}function M(t,s){if(1&t){const o=e.RV6();e.j41(0,"ion-item")(1,"ion-item")(2,"ion-label",10),e.EFF(3,"Enter your Phone Number"),e.k0s(),e.j41(4,"ion-input",11),e.mxI("ngModelChange",function(i){e.eBV(o);const c=e.XpG();return e.DH7(c.phoneNumber,i)||(c.phoneNumber=i),e.Njj(i)}),e.k0s()(),e.j41(5,"ion-button",12),e.bIt("click",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.checkUser())}),e.EFF(6,"Proceed"),e.k0s()()}if(2&t){const o=e.XpG();e.R7$(4),e.R50("ngModel",o.phoneNumber)}}function k(t,s){if(1&t){const o=e.RV6();e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3),e.k0s(),e.j41(4,"ion-card-subtitle"),e.EFF(5),e.k0s()(),e.j41(6,"ion-card-content")(7,"p")(8,"strong"),e.EFF(9,"Phone:"),e.k0s(),e.EFF(10),e.k0s(),e.j41(11,"p")(12,"strong"),e.EFF(13,"Email:"),e.k0s(),e.EFF(14),e.k0s(),e.j41(15,"p")(16,"strong"),e.EFF(17,"Membership Expiry:"),e.k0s(),e.EFF(18),e.k0s()(),e.j41(19,"ion-button",13),e.bIt("click",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.renewMembership())}),e.EFF(20,"Renew Membership"),e.k0s(),e.j41(21,"ion-button",14),e.bIt("click",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.clearUserInfo())}),e.EFF(22,"Log out"),e.k0s()()}if(2&t){const o=e.XpG();e.R7$(3),e.JRh(o.userInfo.name),e.R7$(2),e.JRh(o.userInfo.address),e.R7$(5),e.SpI(" ",o.userInfo.phoneNumber,""),e.R7$(4),e.SpI(" ",o.userInfo.email,""),e.R7$(4),e.SpI(" ",o.userInfo.expiryDate,"")}}const R=[{path:"",component:(()=>{var t;class s{constructor(n,i,c,g){this.route=n,this.router=i,this.gymManagementService=c,this.iab=g,this.gymId=null,this.gymInfo=null,this.loading=!1,this.error=null,this.phoneNumber="",this.userInfo=null,this.showRegisterButton=!1}ngOnInit(){var n;this.gymId=this.route.snapshot.queryParamMap.get("gymId"),this.phoneNumber=null!==(n=this.route.snapshot.queryParamMap.get("phoneNumber"))&&void 0!==n?n:"",this.gymId&&this.getGymInfo()}getGymInfo(){this.gymId?(this.loading=!0,this.error=null,this.gymManagementService.getGymInfo(this.gymId).subscribe({next:n=>{console.log(n),n.success?(this.loading=!1,this.gymInfo=n.gymInfo,this.phoneNumber&&this.getUserInfo()):this.error="Failed to fetch gym details"},error:n=>{this.error="An error occurred while fetching gym details",console.error(n),this.loading=!1}})):this.error="Gym ID not found in URL"}getUserInfo(){this.loading=!0,this.error="",this.gymManagementService.getUserInfo(this.gymId,this.phoneNumber).subscribe(n=>{console.log(n),this.loading=!1,"success"===n.status?this.userInfo=n.user:(this.userInfo=null,this.phoneNumber="")},n=>{console.log(n),this.loading=!1,this.phoneNumber=""})}checkUser(){this.showRegisterButton=!1,this.phoneNumber?(this.loading=!0,this.error="",this.gymManagementService.getUserInfo(this.gymId,this.phoneNumber).subscribe(n=>{console.log(n),this.loading=!1,"success"===n.status?this.userInfo=n.user:(this.showRegisterButton=!0,this.userInfo=null,this.error="User not found. Would you like to register?")},n=>{console.log(n),this.loading=!1,this.error="An error occurred while checking membership."})):this.error="Please enter a phone number."}registerUser(){this.gymId&&this.phoneNumber?this.router.navigate(["/register-user"],{queryParams:{gymId:this.gymId,phoneNumber:this.phoneNumber}}):console.error("Gym ID or Phone Number is missing.")}clearUserInfo(){this.phoneNumber="",this.userInfo=null,this.showRegisterButton=!1}renewMembership(){var n;console.log("Renewing membership for:",null===(n=this.userInfo)||void 0===n?void 0:n.name),this.payWithUPI()}payWithUPI(){this.generateRandomString(),this.generateRandomString();const E=window.location.href,p=`upi://pay?pa=6poornima6-1@okhdfcbank&am=10.00&cu=INR&url=${encodeURIComponent(E)}`;console.log(p),this.iab.create(p,"_system")}generateRandomString(){return Math.random().toString(36).substring(2,12)}callGym(n){n?window.open(`tel:${n}`,"_system"):console.error("Contact number is not available.")}emailGym(n){n?window.open(`mailto:${n}`,"_system"):console.error("Email address is not available.")}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(l.nX),e.rXU(l.Ix),e.rXU(d.q),e.rXU(f.N))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-membership"]],decls:12,vars:5,consts:[["slot","start"],[4,"ngIf"],["color","danger"],["expand","block","fill","outline","color","primary",3,"click",4,"ngIf"],["expand","block","fill","outline","color","primary",3,"click"],[1,"action-buttons"],["color","primary","fill","clear",3,"click"],["name","call","slot","start"],["color","secondary","fill","clear",3,"click"],["name","mail","slot","start"],["position","floating"],["type","tel",3,"ngModelChange","ngModel"],["slot","end","expand","block","color","primary",3,"click"],["expand","block","color","success",3,"click"],["expand","block","color","danger",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-menu-button"),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Membership"),e.k0s()()(),e.j41(6,"ion-content"),e.DNE(7,b,1,0,"ion-spinner",1)(8,I,5,2,"ion-card",1)(9,y,14,2,"ion-card",1)(10,M,7,1,"ion-item",1)(11,k,23,5,"ion-card",1),e.k0s()),2&n&&(e.R7$(7),e.Y8G("ngIf",i.loading),e.R7$(),e.Y8G("ngIf",i.error),e.R7$(),e.Y8G("ngIf",i.gymInfo),e.R7$(),e.Y8G("ngIf",!i.userInfo),e.R7$(),e.Y8G("ngIf",i.userInfo))},dependencies:[u.bT,m.BC,m.vS,r.Jm,r.QW,r.b_,r.I9,r.ME,r.HW,r.tN,r.W9,r.eU,r.iq,r.$w,r.uz,r.he,r.MC,r.w2,r.IO,r.BC,r.ai,r.Gw],styles:[".action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px}ion-button[_ngcontent-%COMP%]{font-size:16px;height:48px;text-transform:none}"]}),s})()}];let P=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[l.iI.forChild(R),l.iI]}),s})(),F=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[u.MD,m.YN,r.bv,P]}),s})()}}]);