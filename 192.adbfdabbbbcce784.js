"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[192],{192:(O,C,g)=>{g.d(C,{V:()=>$});var k=g(467),e=g(3953),i=g(5374),b=g(2872),P=g(5312),_=g(3103),v=g(9333),E=g(4589),D=g(1626);let F=(()=>{var s;class c{constructor(t,o,n,r){this.workoutData=t,this.userData=o,this.muscleGroupService=n,this.http=r}ngOnInit(){this.workoutData.loadWorkOuts().subscribe(t=>{console.log("initialized workout data")})}defaultWorkoutConfig(){return{goal:"Build Muscle",fitnessLevel:"intermediate",daysPerWeek:4,equipment:["barbell","dumbbell"],focusAreas:["chest","legs","back","arms","upper body","core"],duration:60,preferences:["compound","isolation"]}}fillInExcerciseData(t){var o=this;return(0,k.A)(function*(){var n=o.workoutData.getAllWorkouts(),r=[];return t.days.forEach(d=>(d.exercises=d.exerciseIds.map(u=>n.find(l=>l.id===u)).filter(u=>void 0!==u),r.push(d),d)),t.days=r,t})()}getWorkoutConfig(){var t=this;return(0,k.A)(function*(){var o,n,r,d,u,l,f,m=t.defaultWorkoutConfig();console.log("Getting workout config");var p=yield t.userData.getWorkoutPlan();return null===p?m:{goal:null!==(o=(p=yield t.fillInExcerciseData(p)).goal)&&void 0!==o?o:m.goal,fitnessLevel:null!==(n=p.fitnessLevel)&&void 0!==n?n:m.fitnessLevel,daysPerWeek:null!==(r=p.daysPerWeek)&&void 0!==r?r:m.daysPerWeek,equipment:null!==(d=p.equipment)&&void 0!==d?d:m.equipment,focusAreas:null!==(u=p.focusAreas)&&void 0!==u?u:m.focusAreas,duration:null!==(l=p.duration)&&void 0!==l?l:m.duration,preferences:null!==(f=p.preferences)&&void 0!==f?f:m.preferences}})()}generateWorkoutPlan(t){var o=this;return(0,k.A)(function*(){var n=yield o.userData.getWorkoutPlan();if(null!==n)return yield o.fillInExcerciseData(n);const r=o.determineSplit(t.daysPerWeek,t.goal,t.preferences),d=o.selectExercises(t.goal,t.fitnessLevel,t.equipment,t.focusAreas,t.preferences),u=o.createWorkoutSchedule(r,d,t.fitnessLevel,t.goal,t.duration);var l=o.generateWeeklyPlan(u);return l.goal=t.goal,l.fitnessLevel=t.fitnessLevel,l.daysPerWeek=t.daysPerWeek,l.equipment=t.equipment,l.focusAreas=t.focusAreas,l.duration=t.duration,l.preferences=t.preferences,yield o.userData.saveWorkoutPlan(l),yield o.fillInExcerciseData(l)})()}determineSplit(t,o,n){return 3===t?[{day:"Day 1",muscleGroups:["chest","back","legs"]},{day:"Day 2",muscleGroups:["arms","upper body","core"]},{day:"Day 3",muscleGroups:["all"]}]:4===t?[{day:"Day 1",muscleGroups:["chest","back"]},{day:"Day 2",muscleGroups:["legs"]},{day:"Day 3",muscleGroups:["arms","upper body"]},{day:"Day 4",muscleGroups:["core","all"]}]:5===t?[{day:"Day 1",muscleGroups:["chest"]},{day:"Day 2",muscleGroups:["back"]},{day:"Day 3",muscleGroups:["legs"]},{day:"Day 4",muscleGroups:["arms","upper body"]},{day:"Day 5",muscleGroups:["core"]}]:6===t?[{day:"Day 1",muscleGroups:["chest"]},{day:"Day 2",muscleGroups:["back"]},{day:"Day 3",muscleGroups:["legs"]},{day:"Day 4",muscleGroups:["arms"]},{day:"Day 5",muscleGroups:["upper body"]},{day:"Day 6",muscleGroups:["core"]}]:[{day:"custom split",muscleGroups:["all"]}]}selectExercises(t,o,n,r,d){const u=this.workoutData.getAllWorkouts(),l=this.muscleGroupService.getMuscleGroups().filter(m=>r.includes(m.key)).flatMap(m=>m.values);return u.filter(m=>n.includes(m.equipment)&&l.includes(m.primaryMuscles[0]))}createWorkoutSchedule(t,o,n,r,d){const u=[];return this.muscleGroupService.getMuscleGroups(),t.forEach(f=>{const m=this.getRandomExercises(o,f.muscleGroups,4),p=m.map(h=>h.id).filter(h=>void 0!==h);u.push({day:f.day,muscleGroups:f.muscleGroups,exercises:m,exerciseIds:p,sets:this.determineSets(r,n),reps:this.determineReps(r,n),rest:this.determineRest(r,n)})}),u}getRandomExercises(t,o,n){const r=this.muscleGroupService.getMuscleGroups().filter(l=>o.includes(l.key)).flatMap(l=>l.values);return t.filter(l=>r.includes(l.primaryMuscles[0])).sort(()=>.5-Math.random()).slice(0,n)}determineSets(t,o){return"Lose Weight"===t?"beginner"===o?5:6:"Build Muscle"===t?"beginner"===o?4:5:3}determineReps(t,o){return"Lose Weight"===t?12:"Build Muscle"===t?8:10}determineRest(t,o){return"Lose Weight"===t?"60-90 seconds":"Build Muscle"===t?"2-3 minutes":"60 seconds"}generateWeeklyPlan(t){return{days:t.map(n=>({...n,exercises:n.exercises.map(r=>r)}))}}fetchThisWeeksWorkoutPlan(){var t=this;return(0,k.A)(function*(){const o=new Date,n=new Date(o.getFullYear(),0,1),r=Math.floor((o.getTime()-n.getTime())/864e5),d=Math.ceil((r+n.getDay()+1)/4);return t.fetchWorkoutPlanFromCoach(P.c.workoutPlanBaseUrl+"weekly-plan-"+d+".json")})()}fetchWorkoutPlanFromCoach(t){var o=this;return(0,k.A)(function*(){try{console.log("fetching from url "+t);const n=yield o.http.get(t).toPromise();return o.fillInExcerciseData(n)}catch(n){return console.error("Error fetching workout plan:",n),console.log("fetching from url failed, fetching from default"),o.fetchWorkoutPlanFromCoach(P.c.defaultWorkoutPlanUrl)}})()}}return(s=c).\u0275fac=function(t){return new(t||s)(e.KVO(_.k),e.KVO(v.E),e.KVO(E.A),e.KVO(D.Qq))},s.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),c})();var W=g(177),y=g(4341);function G(s,c){if(1&s){const a=e.RV6();e.j41(0,"ion-chip",14),e.bIt("click",function(){const o=e.eBV(a).$implicit,n=e.XpG();return e.Njj(n.toggleEquipment(o))}),e.j41(1,"ion-label"),e.EFF(2),e.k0s()()}if(2&s){const a=c.$implicit,t=e.XpG();e.Y8G("color",t.workoutConfig.equipment.includes(a)?"primary":"medium"),e.R7$(2),e.JRh(a)}}let w=(()=>{var s;class c{constructor(t,o,n,r){this.modalCtrl=t,this.cdr=o,this.workoutPlanner=n,this.navParams=r,this.equipments=["barbell","dumbbell","cable","machine","body only","bands"]}ngOnInit(){this.workoutConfig=this.workoutPlanner.defaultWorkoutConfig()}ionViewWillEnter(){var t=this.navParams.get("workoutConfig");t&&(this.workoutConfig=t)}applyFilters(){this.dismiss(this.workoutConfig)}dismiss(t){this.modalCtrl.dismiss(t)}toggleEquipment(t){var o;null!==(o=this.workoutConfig)&&void 0!==o&&o.equipment.includes(t)?this.workoutConfig.equipment=this.workoutConfig.equipment.filter(n=>n!==t):this.workoutConfig.equipment.push(t)}}return(s=c).\u0275fac=function(t){return new(t||s)(e.rXU(i.W3),e.rXU(e.gRc),e.rXU(F),e.rXU(b.y8))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-workout-planner-editor"]],decls:53,vars:9,consts:[["translucent","true"],["slot","start"],[3,"click"],["slot","end"],["strong","",3,"click"],[3,"ngModelChange","ngModel"],["value","beginner"],["value","intermediate"],["value","advanced"],["value","Lose Weight"],["value","Build Muscle"],["value","Endurance"],["aria-label","Days in a Week",3,"ngModelChange","ngModel","ticks","pin","snaps","min","max"],[3,"color","click",4,"ngFor","ngForOf"],[3,"click","color"]],template:function(t,o){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),e.bIt("click",function(){return o.dismiss()}),e.EFF(4,"Cancel"),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6," Create Workout Plan "),e.k0s(),e.j41(7,"ion-buttons",3)(8,"ion-button",4),e.bIt("click",function(){return o.applyFilters()}),e.EFF(9,"Done"),e.k0s()()()(),e.j41(10,"ion-content")(11,"ion-item")(12,"ion-label"),e.EFF(13,"What is your fitness level?"),e.k0s()(),e.j41(14,"ion-item")(15,"ion-segment",5),e.mxI("ngModelChange",function(r){return e.DH7(o.workoutConfig.fitnessLevel,r)||(o.workoutConfig.fitnessLevel=r),r}),e.j41(16,"ion-segment-button",6)(17,"ion-label"),e.EFF(18,"Beginner"),e.k0s()(),e.j41(19,"ion-segment-button",7)(20,"ion-label"),e.EFF(21,"Intermediate"),e.k0s()(),e.j41(22,"ion-segment-button",8)(23,"ion-label"),e.EFF(24,"Advanced"),e.k0s()()()(),e.j41(25,"ion-item")(26,"ion-label"),e.EFF(27,"What is your goal?"),e.k0s()(),e.j41(28,"ion-item")(29,"ion-segment",5),e.mxI("ngModelChange",function(r){return e.DH7(o.workoutConfig.goal,r)||(o.workoutConfig.goal=r),r}),e.j41(30,"ion-segment-button",9)(31,"ion-label"),e.EFF(32,"Lose Weight"),e.k0s()(),e.j41(33,"ion-segment-button",10)(34,"ion-label"),e.EFF(35,"Build Muscle"),e.k0s()(),e.j41(36,"ion-segment-button",11)(37,"ion-label"),e.EFF(38,"Stay Fit"),e.k0s()()()(),e.j41(39,"ion-item")(40,"ion-label"),e.EFF(41,"How many days you can train in a week?"),e.k0s()(),e.j41(42,"ion-item")(43,"ion-range",12),e.mxI("ngModelChange",function(r){return e.DH7(o.workoutConfig.daysPerWeek,r)||(o.workoutConfig.daysPerWeek=r),r}),e.j41(44,"ion-label",1),e.EFF(45,"2"),e.k0s(),e.j41(46,"ion-label",3),e.EFF(47,"6"),e.k0s()()(),e.j41(48,"ion-item")(49,"ion-label"),e.EFF(50,"What are the equipments you have access to?"),e.k0s()(),e.j41(51,"ion-item"),e.DNE(52,G,3,2,"ion-chip",13),e.k0s()()),2&t&&(e.R7$(15),e.R50("ngModel",o.workoutConfig.fitnessLevel),e.R7$(14),e.R50("ngModel",o.workoutConfig.goal),e.R7$(14),e.R50("ngModel",o.workoutConfig.daysPerWeek),e.Y8G("ticks",!0)("pin",!0)("snaps",!0)("min",2)("max",6),e.R7$(9),e.Y8G("ngForOf",o.equipments))},dependencies:[W.Sq,y.BC,y.vS,i.Jm,i.QW,i.ZB,i.W9,i.eU,i.uz,i.he,i.Ob,i.Gp,i.eP,i.BC,i.ai,i.su,i.Je],styles:["ion-content[_ngcontent-%COMP%]{height:100%}"]}),c})();var j=g(5642);function M(s,c){1&s&&(e.j41(0,"span"),e.EFF(1,"Filter"),e.k0s())}function R(s,c){1&s&&(e.j41(0,"span"),e.nrm(1,"ion-icon",11),e.k0s())}function S(s,c){if(1&s){const a=e.RV6();e.j41(0,"ion-button",8),e.bIt("click",function(){e.eBV(a);const o=e.XpG();return e.Njj(o.presentFilter())}),e.DNE(1,M,2,0,"span",9),e.j41(2,"div",10),e.DNE(3,R,2,0,"span",9),e.k0s()()}if(2&s){const a=e.XpG();e.R7$(),e.Y8G("ngIf",a.ios),e.R7$(2),e.Y8G("ngIf",!a.ios)}}function I(s,c){if(1&s&&(e.j41(0,"ion-item-divider",14)(1,"ion-label")(2,"h1"),e.EFF(3),e.k0s(),e.j41(4,"h3"),e.EFF(5),e.k0s()()()),2&s){const a=e.XpG().$implicit;e.R7$(3),e.JRh(a.day),e.R7$(2),e.JRh(a.muscleGroups.join(", "))}}function x(s,c){if(1&s&&(e.j41(0,"ion-item",15)(1,"ion-thumbnail",16),e.nrm(2,"img",17),e.k0s(),e.j41(3,"ion-label")(4,"h2"),e.EFF(5),e.k0s(),e.j41(6,"p"),e.EFF(7),e.k0s(),e.j41(8,"p"),e.EFF(9),e.k0s()()()),2&s){const a=c.$implicit,t=e.XpG().$implicit;e.Mz_("routerLink","/app/tabs/workouts/",a.id,""),e.R7$(2),e.FS9("src",a.thumbnail,e.B4B),e.FS9("alt",a.thumbnail),e.R7$(3),e.JRh(a.name),e.R7$(2),e.Lme("",t.sets," x ",t.reps," Sets"),e.R7$(2),e.SpI("",t.rest," seconds rest")}}function T(s,c){if(1&s&&(e.j41(0,"ion-item-group"),e.DNE(1,I,6,2,"ion-item-divider",12)(2,x,10,8,"ion-item",13),e.k0s()),2&s){const a=c.$implicit;e.R7$(),e.Y8G("ngIf",a.exercises&&a.exercises.length>0),e.R7$(),e.Y8G("ngForOf",a.exercises)}}let $=(()=>{var s;class c{constructor(t,o,n,r,d,u){this.workoutPlanner=t,this.workoutData=o,this.modalCtrl=n,this.routerOutlet=r,this.userData=d,this.cdr=u,this.ios=!1,this.selectedSegment="from-coach"}ngOnInit(){this.workoutData.loadWorkOuts().subscribe(t=>{this.workoutPlanner.getWorkoutConfig().then(o=>{this.workoutConfig=o,this.reloadWorkoutPlan()})})}reloadWorkoutPlan(){"custom"===this.selectedSegment?this.loadCustomPlan():this.fetchWorkoutPlanFromCoach()}loadCustomPlan(){this.workoutPlanner.generateWorkoutPlan(this.workoutConfig).then(t=>{this.workoutPlan=t})}fetchWorkoutPlanFromCoach(){this.workoutPlanner.fetchThisWeeksWorkoutPlan().then(t=>{console.log(t),this.workoutPlan=t,this.cdr.detectChanges()})}presentFilter(){var t=this;return(0,k.A)(function*(){const o=yield t.modalCtrl.create({component:w,presentingElement:t.routerOutlet.nativeEl,componentProps:{workoutConfig:t.workoutConfig}});yield o.present();const{data:n}=yield o.onWillDismiss();n&&(t.userData.clearWorkoutPlan(),t.workoutConfig=n,t.workoutPlanner.generateWorkoutPlan(t.workoutConfig).then(r=>{t.workoutPlan=r}))})()}}return(s=c).\u0275fac=function(t){return new(t||s)(e.rXU(F),e.rXU(_.k),e.rXU(i.W3),e.rXU(i.Rg),e.rXU(v.E),e.rXU(e.gRc))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-workout-planner"]],decls:18,vars:3,consts:[["slot","end"],[3,"click",4,"ngIf"],["fullscreen","true"],[1,"ion-padding-top","workout-detail"],[3,"ngModelChange","ionChange","ngModel"],["value","from-coach"],["value","custom"],[4,"ngFor","ngForOf"],[3,"click"],[4,"ngIf"],[1,"icon-container"],["slot","icon-only","name","create"],["sticky","","color","primary",4,"ngIf"],[3,"routerLink",4,"ngFor","ngForOf"],["sticky","","color","primary"],[3,"routerLink"],["slot","start"],["width","150","height","100",3,"src","alt"]],template:function(t,o){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Workout Planner"),e.k0s(),e.j41(4,"ion-buttons",0),e.DNE(5,S,4,2,"ion-button",1),e.k0s()()(),e.j41(6,"ion-content",2)(7,"div",3)(8,"ion-segment",4),e.mxI("ngModelChange",function(r){return e.DH7(o.selectedSegment,r)||(o.selectedSegment=r),r}),e.bIt("ionChange",function(){return o.reloadWorkoutPlan()}),e.j41(9,"ion-segment-button",5)(10,"ion-label"),e.EFF(11,"From Coach"),e.k0s()(),e.j41(12,"ion-segment-button",6)(13,"ion-label"),e.EFF(14,"Custom"),e.k0s()()()(),e.j41(15,"div")(16,"ion-list"),e.DNE(17,T,3,2,"ion-item-group",7),e.k0s()()()),2&t&&(e.R7$(5),e.Y8G("ngIf","custom"===o.selectedSegment),e.R7$(3),e.R50("ngModel",o.selectedSegment),e.R7$(9),e.Y8G("ngForOf",null==o.workoutPlan?null:o.workoutPlan.days))},dependencies:[W.Sq,W.bT,y.BC,y.vS,i.Jm,i.QW,i.W9,i.eU,i.iq,i.uz,i.Dg,i.jh,i.he,i.nf,i.Gp,i.eP,i.Zx,i.BC,i.ai,i.Je,i.N7,j.Wk],styles:["h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#fff}"]}),c})()}}]);